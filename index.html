<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sinuca Pro - Premium Mobile</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --table-color: #006400;
            --border-color: #5d2e0a;
            --text-color: #ffffff;
            --accent-color: #f1c40f;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .header {
            padding: 20px;
            text-align: center;
        }

        .stats {
            background: rgba(0,0,0,0.5);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid var(--accent-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        #game-container {
            position: relative;
            width: 95vw;
            max-width: 800px;
            aspect-ratio: 2 / 1;
            border: 8px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        canvas {
            background: var(--table-color);
            width: 100%;
            height: 100%;
            display: block;
        }

        .controls {
            margin-top: 20px;
            padding: 10px;
            text-align: center;
            max-width: 90%;
        }

        .msg {
            font-weight: bold;
            height: 24px;
            margin-top: 10px;
            color: var(--accent-color);
        }

        /* Anima√ß√£o de ganho */
        .win-flash { color: #2ecc71; font-size: 1.5rem; }
    </style>
</head>
<body>

    <div class="header">
        <h1>Sinuca Apostada</h1>
        <div class="stats">
            Saldo: <span id="saldo" style="color: #2ecc71;">R$ 100.00</span>
        </div>
        <div id="mensagem" class="msg">Toque na mesa para jogar (R$ 10,00)</div>
    </div>

    <div id="game-container">
        <canvas id="poolTable" width="800" height="400"></canvas>
    </div>

    <div class="controls">
        <p>Probabilidade de Reten√ß√£o: 90% (Modo Casa)</p>
        <small>Simula√ß√£o de sistema de apostas para fins de estudo.</small>
    </div>

    <script>
        const canvas = document.getElementById('poolTable');
        const ctx = canvas.getContext('2d');
        const saldoElement = document.getElementById('saldo');
        const msgElement = document.getElementById('mensagem');

        let saldo = 100.00;
        let taxaRetencao = 0.90; 
        let jogando = false;

        let bola = { x: 150, y: 200, vx: 0, vy: 0, radius: 12 };
        let alvo = { x: 740, y: 200, radius: 25 };

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Ca√ßapa (Buraco)
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.arc(alvo.x, alvo.y, alvo.radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Brilho da ca√ßapa
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Bola Branca
            ctx.fillStyle = '#fff';
            ctx.beginPath();
            ctx.arc(bola.x, bola.y, bola.radius, 0, Math.PI * 2);
            ctx.fill();

            // Movimento e Atrito
            bola.x += bola.vx;
            bola.y += bola.vy;
            bola.vx *= 0.985;
            bola.vy *= 0.985;

            // Detectar parada para nova jogada
            if (Math.abs(bola.vx) < 0.1 && Math.abs(bola.vy) < 0.1 && jogando) {
                jogando = false;
                resetPos();
            }

            // Detectar se entrou na ca√ßapa (L√≥gica simplificada)
            let dist = Math.hypot(bola.x - alvo.x, bola.y - alvo.y);
            if (dist < alvo.radius && jogando) {
                ganhar();
            }

            requestAnimationFrame(draw);
        }

        function resetPos() {
            bola.x = 150;
            bola.y = 200;
            bola.vx = 0;
            bola.vy = 0;
        }

        function ganhar() {
            if (jogando) {
                saldo += 20; // Devolve os 10 e ganha mais 10
                atualizarSaldo();
                msgElement.innerHTML = "üèÜ VOC√ä GANHOU! + R$ 10,00";
                msgElement.className = "msg win-flash";
                jogando = false;
            }
        }

        function atualizarSaldo() {
            saldoElement.innerText = `R$ ${saldo.toFixed(2)}`;
        }

        function disparar(e) {
            if (jogando || saldo < 10) {
                if (saldo < 10) msgElement.innerText = "Saldo insuficiente!";
                return;
            }

            jogando = true;
            saldo -= 10;
            atualizarSaldo();
            msgElement.className = "msg";
            msgElement.innerText = "Tacada efetuada...";

            const sorteio = Math.random();

            if (sorteio > (1 - taxaRetencao)) {
                // CASA GANHA: Desvia a bola
                bola.vx = 18;
                bola.vy = (Math.random() > 0.5 ? 2.5 : -2.5);
                setTimeout(() => {
                    if (jogando) msgElement.innerText = "‚ùå Quase! Tente novamente.";
                }, 1000);
            } else {
                // JOGADOR GANHA: Vai reto
                bola.vx = 18;
                bola.vy = 0;
            }
        }

        // Eventos para PC e Mobile
        canvas.addEventListener('mousedown', disparar);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            disparar();
        });

        draw();
    </script>
</body>
</html>
